--TẠO CSDL QUẢN LÝ LỊCH DẠY HỌC
CREATE DATABASE QLLDH
GO

USE QLLDH
GO

--TẠO BẢNG GIÁO VIÊN
CREATE TABLE GIAOVIEN
(
	MAGV INT NOT NULL,
	HOTEN NVARCHAR(30),
	DTGV NVARCHAR(10),
  	MAKHOA INT,
  	CONSTRAINT PK_GV PRIMARY KEY (MAGV),
  	CONSTRAINT FK_GV FOREIGN KEY (MAKHOA) REFERENCES KHOA(MAKHOA)
)
GO

 --TẠO BẢNG MÔN HỌC
CREATE TABLE MONHOC
(
	MAMH INT NOT NULL,
	TENMH NVARCHAR(30),
  	CONSTRAINT PK_MH PRIMARY KEY (MAMH)
)
GO

--TẠO BẢNG PHÒNG HỌC
CREATE TABLE PHONGHOC
(
  SOPHONG NVARCHAR(10) NOT NULL,
  CHUCNANG NVARCHAR(30),
  CONSTRAINT PK_PH PRIMARY KEY (SOPHONG)
)
GO

--TẠO BẢNG KHOA
CREATE TABLE KHOA
(
    MAKHOA INT NOT NULL,
    TENKHOA NVARCHAR(30),
    DTKHOA NVARCHAR(10),
  	CONSTRAINT PK_KHOA PRIMARY KEY (MAKHOA)
)
GO

--TẠO BẢNG LỚP
CREATE TABLE LOP
(
    MALOP INT NOT NULL,
    TENLOP NVARCHAR(30),
    SISO INT,
    MAKHOA INT,
  	CONSTRAINT PK_LOP PRIMARY KEY (MALOP),
  	CONSTRAINT FK_LOP FOREIGN KEY (MAKHOA) REFERENCES KHOA(MAKHOA)
)
GO

--TẠO BẢNG LỊCH BÁO GIẢNG
CREATE TABLE LICHBAOGIANG
(
    MALICH int not null,
    MAGV INT NOT NULL,          
    MALOP INT NOT NULL,          
    MAMH INT NOT NULL,          
    SOPHONG NVARCHAR(10) NOT NULL,        
    NGAYDAY DATE NOT NULL,              
    TUTIET INT NOT NULL,                
    DENTIET INT NOT NULL,                
    BAIDAY NVARCHAR(100),                
    GHICHU NVARCHAR(100),               
    LYTHUYET INT NOT NULL,              
    --TẠO KHÓA CHÍNH
    CONSTRAINT PK_LICHDAY PRIMARY KEY (MALICH),
    --TẠO KHÓA NGOẠI
    CONSTRAINT FK_LICHDAY_GV FOREIGN KEY (MAGV) REFERENCES GIANGVIEN(MAGV),
    CONSTRAINT FK_LICHDAY_LOP FOREIGN KEY (MALOP) REFERENCES LOP(MALOP),
    CONSTRAINT FK_LICHDAY_MH FOREIGN KEY (MAMH) REFERENCES MONHOC(MAMH),
    CONSTRAINT FK_LICHDAY_PHONG FOREIGN KEY (SOPHONG) REFERENCES PHONGHOC(SOPHONG),
    -- TẠO RÀNG BUỘC KIỂM TRA
    CONSTRAINT CK_LICHDAY_TIET CHECK 
        (TUTIET >= 1 AND DENTIET <= 16 AND TUTIET <= DENTIET),
    CONSTRAINT CK_LICHDAY_LYTHUYET CHECK 
  		(LYTHUYET IN (1, 2))
);
    

 
 
 
--THÊM DỮ LIỆU VÀO BẢNG GIÁO VIÊN
INSERT INTO GIAOVIEN (MAGV, HOTEN, DTGV, MAKHOA)
VALUES
(1001, N'Nguyễn Văn A', '0909000001', 2101),
(1002, N'Nguyễn Văn B', '0909000002', 2102),
(1003, N'Nguyễn Văn C', '0909000003', 2103),
(1004, N'Nguyễn Văn D', '0909000004', 2104),
(1005, N'Nguyễn Văn E', '0909000005', 2105);
--THÊM DỮ LIỆU VÀO BẢNG MÔN HỌC
INSERT INTO MONHOC ( MAMH, TENMH)
VALUES
(3201, N'Cơ sở dữ liệu'),
(3202, N'Lịch Sử Đảng'),
(3203, N'Kinh tế chính trị'),
(3204, N'Kinh tế vi mô'),
(3205, N'Tâm lý học');
--THÊM DỮ LIỆU VÀO BẢNG PHÒNG HỌC
INSERT INTO PHONGHOC (SOPHONG, CHUCNANG)
VALUES
('A100', N'Phòng lý thuyết'),
('B100', N'Phòng thực hành máy tính'),
('C100', N'Phòng nghe nhìn'),
('D100', N'Xưởng thực tập cơ khí'),
('E100', N'Phòng tự học');
--THÊM DỮ LIỆU VÀO BẢNG KHOA
INSERT INTO KHOA (MAKHOA,TENKHOA,DTKHOA)
VALUES
(2101, N'Công nghệ thông tin','0928112233'),
(2102, N'Điện','0928112244'),
(2103, N'Cơ khí','0928112255'),
(2104, N'Luật','0928112266'),
(2105, N'Thương Mại Du Lịch','0928112277');
--THÊM DỮ LIỆU VÀO BẢNG LỚP
INSERT INTO LOP (MALOP,TENLOP,SISO, MAKHOA)
VALUES
(4301, N'DHCNTT19C',77, 2101),
(4302, N'DHĐT19A',80, 2102),
(4303, N'DHCK19A',90, 2103),
(4304, N'DHLKT19B', 76, 2104),
(4305, N'DHTMDT19B',89, 2105);
--THÊM DỮ LIỆU VÀO BẢNG LỊCH BÁO GIẢNG
INSERT INTO LICHBAOGIANG (MALICH, MAGV, MALOP,MAMH,SOPHONG,NGAYDAY,TUTIET,DENTIET,BAIDAY,LYTHUYET)
VALUES
(5111, 1001, 4301, 3201,'B100', '2025-02-10', 1, 6, N' Cơ sở dữ liệu',1),
(5112, 1002, 4302, 3202,'A100', '2025-01-11', 4, 6, N'Lắp mạch điện', 2),
(5113, 1003, 4303, 3203,'A100', '2025-03-12', 7, 12, N'sản xuất và lưu thông tư bản',2),
(5114, 1004, 4304, 3205,'E100', '2025-04-13', 10, 12, N'Cảm giác và tri giác', 2),
(5115, 1005, 4305, 3204,'A100', '2025-04-14', 13, 16, N'Tổng cung và cầu',2);
  
  
  

  
  
  
  
